define(["libs/require/domReady-min!","jQuery","Underscore","Backbone","settings","views/topnav","views/jquerysearchresults","views/languageview","views/pagescrapedlanguageview","views/fullwindow","collections/mozdevcssprops","collections/mdnhtmlelements","collections/mdnjsobjs","collections/mdndomobjs","collections/phpexts","collections/jqentries","collections/xsltpages","collections/pythonpages","collections/python3pages","collections/nodejspages","text!templates/mdnpage.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=d.Router.extend({routes:{"":"main",about:"about"},initialize:function(){c.bindAll(this,"changeLanguage"),this.languageViews={css:new h({languageName:"CSS",resultsClassNames:"pageText",collection:new k,placeholder:"Type a CSS property name",mainResultTemplate:u}),html:new h({languageName:"HTML",resultsClassNames:"pageText",collection:new l,placeholder:"Type an HTML element name",mainResultTemplate:u}),javascript:new h({languageName:"JavaScript",resultsClassNames:"pageText",collection:new m,placeholder:"Type a JavaScript class/function name",mainResultTemplate:u}),dom:new h({languageName:"DOM",resultsClassNames:"pageText",collection:new n,placeholder:"Type a DOM object name",mainResultTemplate:u}),jquery:new h({languageName:"jQuery",resultsClassNames:"jq-primaryContent",collection:new p,placeholder:"Type a jQuery entry name",mainSearchResultsView:g}),php:new h({languageName:"PHP",resultsClassNames:"",collection:new o,placeholder:"Type a PHP function name",debounceTime:150}),python:new i({languageName:"Python",resultsClassNames:"python",collection:new r,placeholder:"Type a Python class/function name",debounceTime:200,minQueryLength:3}),python3:new h({languageName:"Python3",resultsClassNames:"python3",collection:new s,placeholder:"Type a Python 3.3.2 class/function name",debounceTime:200,minQueryLength:3}),nodejs:new h({languageName:"Nodejs",resultsClassNames:"nodejs",collection:new t,placeholder:"Node.js v0.10.17 Manual & Documentation",debounceTime:200,minQueryLength:3})},this.currentLanguage=null;var a=this;this.renderTopNav=c.once(function(){a.topNavView=new f({el:b(".navbar"),settings:e}),a.topNavView.render(),a.topNavView.bind("changeLanguage",a.changeLanguage)});for(languageName in this.languageViews){console.log("Creating route for "+languageName);var d={languageName:languageName,fn:function(b){console.log("ROUTING "+this.languageName+" : "+b),a.renderTopNav(),a.topNavView.setActiveElement("nav-"+this.languageName),a.languageViews[this.languageName].setQuery(b)}};c.bindAll(d,"fn"),this.route(new RegExp("^"+languageName+"(?:/([^/]*))?$"),languageName,d.fn)}},changeLanguage:function(a){b("#about").css("display","none"),b("#toc").css("display","block"),b("#search-results").css("display","block");if(a===this.currentLanguage){this.languageViews[this.currentLanguage].searchHeaderView.onSearch();return}this.currentLanguage!==null&&this.languageViews[this.currentLanguage].setActive(!1),console.log("Setting language to "+a),this.languageViews[a].setActive(!0),b("#search-box").focus(),this.fullWindow||(this.fullWindow=new j),this.languageViews[a].collection.bind("reset",this.fullWindow.onResize),this.currentLanguage=a},main:function(a){this.renderTopNav(),this.changeLanguage("css")},about:function(){this.renderTopNav(),this.topNavView.setActiveElement("nav-about"),b("#toc").css({display:"none"}),b("#search-results").css({display:"none"}),b("#about").css({display:"block"})}}),w=function(){var a=new v;d.history.start()};return{initialize:w}})