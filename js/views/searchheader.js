define(["jQuery","Underscore","Backbone"],function(a,b,c){var d=100,e=c.View.extend({initialize:function(){b.bindAll(this,"render","addBindings","removeBindings","searchFunc"),this.placeholder=this.options.placeholder,this.languageName=this.options.languageName.toLowerCase(),this.lastQuery=null,this.debounceTime=this.options.debounceTime?this.options.debounceTime:d,this.onSearch=b.debounce(this.searchFunc,this.debounceTime),b.bindAll(this,"onSearch"),this.$searchBox=a("#search-box"),this.addBindings()},addBindings:function(){this.$searchBox.bind("keyup",this.onSearch)},removeBindings:function(){this.$searchBox.unbind()},render:function(){var a=this.options.query?this.options.query:"";return this.$("#search-box").attr({value:a,placeholder:this.placeholder}),this},searchFunc:function(){var b=a.trim(this.$searchBox.val()).toLowerCase();c.history.navigate(this.languageName+"/"+b,{trigger:!1,replace:!0});var d=b!=="";if(d&&b===this.lastQuery)return;this.lastQuery=b,d?(console.log("[Searching for "+b+".]"),b=new RegExp(b),this.collection.each(function(a){var c=b.test(a.get("lowerCaseTitle"));a.set({tocVisible:c,mainVisible:c})})):this.collection.each(function(a){a.set({tocVisible:!0,mainVisible:!1})})}});return e})