define(["jQuery","Underscore","Backbone","views/tocbar","text!templates/toc.html"],function(a,b,c,d,e){var f=d.extend({events:{"click a":"onClick"},initialize:function(){b.bindAll(this,"render","addBindings","removeBindings"),this.template=b.template(e),this.lowercaseLanguageName=this.options.languageName.toLowerCase(),this.$searchBox=this.$("#search-box"),this.$searchResults=a("#search-results"),this.nameToPageMap=this.options.nameToPageMap;if(b.isUndefined(this.nameToPageMap))throw"Need to pass nameToPageMap to PageTOCBarView"},onClick:function(b){if(b.button>0)return;if(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)return;var d=a.trim(this.$searchBox.val()).toLowerCase();d===""&&this.collection.each(function(a){a.get("mainVisible")&&a.set({mainVisible:!1})});var e=this.$(b.currentTarget),f=e.attr("data-model-id"),g=e.text();this.nameToPageMap[g].set({mainVisible:!0});var h=a(document.getElementById(f)).offset().top;this.$searchResults.scrollTop(this.$searchResults.scrollTop()+h-60);var i=e.attr("href");c.history.navigate(i,{trigger:!1}),b.preventDefault()}});return f})